<%- include('shared/head.ejs', {title: 'Agenda' }) %>

    <link rel="stylesheet" href="/lib/schedule/css/style.css">
    </head>

    <body>
        <%- include('shared/navbar.ejs') %>

            <header class="cd-main-header text-center flex flex-column flex-center">
                <h5>Bonjour
                    <%= profile.firstname %>
                        <strong><%= profile.name %></strong>
                </h5>
                <h3>Votre emploi du temps</h3>
            </header>

            <div class="row mt-4 justify-content-center">
                <div class="col-sm-8 col-md-2">
                    <form method="post" action="" id="dateForm">
                        <input class="form-control" type="date" id="dateTimePicker" name="dateTimePicker" size="10" maxlength="10" value="<%= datePicker %>" onchange="getSelectedDate()">
                    </form>

                </div>
            </div>

            <div class="row justify-content-md-center">
                <div class="col-10">
                    <div class="cd-schedule cd-schedule--loading margin-top-lg margin-bottom-lg js-cd-schedule">
                        <div class="cd-schedule__timeline">
                            <ul>
                                <li><span>07:00</span></li>
                                <li><span>07:30</span></li>
                                <li><span>08:00</span></li>
                                <li><span>08:30</span></li>
                                <li><span>09:00</span></li>
                                <li><span>09:30</span></li>
                                <li><span>10:00</span></li>
                                <li><span>10:30</span></li>
                                <li><span>11:00</span></li>
                                <li><span>11:30</span></li>
                                <li><span>12:00</span></li>
                                <li><span>12:30</span></li>
                                <li><span>13:00</span></li>
                                <li><span>13:30</span></li>
                                <li><span>14:00</span></li>
                                <li><span>14:30</span></li>
                                <li><span>15:00</span></li>
                                <li><span>15:30</span></li>
                                <li><span>16:00</span></li>
                                <li><span>16:30</span></li>
                                <li><span>17:00</span></li>
                                <li><span>17:30</span></li>
                                <li><span>18:00</span></li>
                                <li><span>18:30</span></li>
                                <li><span>19:00</span></li>
                                <li><span>19:30</span></li>
                                <li><span>20:00</span></li>
                                <li><span>20:30</span></li>
                                <li><span>21:00</span></li>
                                <li><span>21:30</span></li>
                                <li><span>22:00</span></li>
                            </ul>
                        </div>
                        <!-- .cd-schedule__timeline -->

                        <div class="cd-schedule__events">
                            <ul>

                                <% for(a in agenda) {%>

                                    <li class="cd-schedule__group <% if(dateToday == a) {%> dateToday <%}%>">
                                        <div class="cd-schedule__top-info"><span>
                                                <%= a %>
                                            </span></div>

                                        <ul>
                                            <% for(let lesson=0; lesson < agenda[a].length; lesson++) {%>

                                                <li class="cd-schedule__event">
                                                    <a data-start="<%= agenda[a][lesson].start_date.substring(11, 17) %>" data-end="<%= agenda[a][lesson].end_date.substring(11, 17) %>" data-content="event-abs-circuit" data-event="event-5" href="#0" style="background-color: <%= agenda[a][lesson].color%>;"
                                                        data-name="<%= agenda[a][lesson].name %>" data-teacher="<%= agenda[a][lesson].teacher %>" data-room="<%= agenda[a][lesson].room %>" data-floor="<%= agenda[a][lesson].floor %>" data-campus="<%= agenda[a][lesson].campus %>"
                                                        data-modality="<%= agenda[a][lesson].modality %>">
                                                        <em class="cd-schedule__name">
                                                            <%= agenda[a][lesson].name %>
                                                        </em>
                                                    </a>
                                                </li>
                                                <% } %>
                                        </ul>
                                    </li>
                                    <% } %>
                            </ul>
                        </div>

                        <div class="cd-schedule-modal">
                            <header class="cd-schedule-modal__header">
                                <div class="cd-schedule-modal__content">
                                    <span class="cd-schedule-modal__date"></span>
                                    <h3 class="cd-schedule-modal__name"></h3>
                                </div>

                                <div class="cd-schedule-modal__header-bg"></div>
                            </header>

                            <div class="cd-schedule-modal__body">
                                <div class="cd-schedule-modal__event-info"></div>
                                <div class="cd-schedule-modal__body-bg"></div>
                            </div>

                            <a href="#0" class="cd-schedule-modal__close text-replace">Close</a>
                        </div>

                        <div class="cd-schedule__cover-layer"></div>
                    </div>
                    <!-- .cd-schedule -->


                </div>
            </div>
            <script src="/lib/schedule/js/util.js"></script>
            <script src="/lib/schedule/js/main.js"></script>
            <script>
                $('#dateTimePicker').change(function() {
                    $('#dateForm').submit();
                });
            </script>

    </body>

    </html>